<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Custom Text Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri&family=Lateef&family=Rokh&family=Vazirmatn:wght@400;700&display=swap">
    <link rel="stylesheet" href="/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.0.17/purify.min.js"></script>




</head>
<body>
    <div id="navbar">
        <div style="display: flex;">
            <div class="dropdown">
                <button class="dropbtn">File</button>
                <div class="dropdown-content">
                    <a href="#" onclick="newFile()">New</a>
                    <a href="#" onclick="openFile()">Open</a>
                    <a href="#" onclick="saveFile()">Save TXT</a>
					<a href="#" onclick="openShareModal()">Share</a>
                    <a href="#" onclick="printFile()">Print</a>
                    <a href="#" onclick="showDetails()">Details</a>
                </div>
            </div>
            <div class="dropdown">
                <button class="dropbtn">Edit</button>
                <div class="dropdown-content">
                    <a href="#" onclick="copyText()">Copy</a>
                    <a href="#" onclick="cutText()">Cut</a>
                    <a href="#" onclick="pasteText()">Paste</a>
                    <a href="#" onclick="pasteWithoutFormatting()">Paste Without Formatting</a>
                    <a href="#" onclick="selectAll()">Select All</a>
                </div>
            </div>
        </div>
        <div class="dark-mode-toggle">
            <i class="fas fa-moon"></i>
            <input type="checkbox" id="darkModeToggle">
            <label for="darkModeToggle"></label>
        </div>
    </div>
    <div class="editor-wrapper">
        <div id="toolbar">
            <span class="button-group">
                <select id="fontSelect" onchange="changeFont(this.value)">
                    <option value="Arial">Arial</option>
                    <option value="Verdana">Verdana</option>
                    <option value="Tahoma">Tahoma</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Courier New">Courier New</option>
                    <option value="Lucida Sans Unicode">Lucida Sans Unicode</option>
                    <option value="Trebuchet MS">Trebuchet MS</option>
                    <option value="Impact">Impact</option>
                    <option value="Palatino Linotype">Palatino Linotype</option>
                    <option value="Garamond">Garamond</option>
                    <option value="Vazirmatn">Vazirmatn</option>
                    <option value="Lateef">Lateef</option>
                    <option value="Amiri">Amiri</option>
                    <option value="Rokh">Rokh</option>
                </select>
                <select id="sizeSelect">
                    <option value="1">10px</option>
                    <option value="2">13px</option>
                    <option value="3">16px</option>
                    <option value="4">18px</option>
                    <option value="5">24px</option>
                    <option value="6">32px</option>
                    <option value="7">48px</option>
                </select>
            </span>
            <span class="button-group">
                <button id="boldBtn" title="Bold"><i class="fa-solid fa-bold"></i></button>
                <button id="italicBtn" title="Italic"><i class="fa-solid fa-italic"></i></button>
                <button id="underlineBtn" title="Underline"><i class="fa-solid fa-underline"></i></button>
                <button id="strikeBtn" title="Strikethrough"><i class="fa-solid fa-strikethrough"></i></button>
                <button id="subscriptBtn" title="Subscript"><i class="fa-solid fa-subscript"></i></button>
                <button id="superscriptBtn" title="Superscript"><i class="fa-solid fa-superscript"></i></button>
                <button id="bulletListBtn" title="Bullet List"><i class="fa-solid fa-list-ul"></i></button>
                <button id="orderedListBtn" title="Ordered List"><i class="fa-solid fa-list-ol"></i></button>
            </span>
            <span class="button-group">
                <button id="alignLeftBtn" title="Align Left"><i class="fa-solid fa-align-left"></i></button>
                <button id="alignCenterBtn" title="Align Center"><i class="fa-solid fa-align-center"></i></button>
                <button id="alignRightBtn" title="Align Right"><i class="fa-solid fa-align-right"></i></button>
                <button id="alignJustifyBtn" title="Justify"><i class="fa-solid fa-align-justify"></i></button>
            </span>
            <span class="button-group">
                <label for="foreColorInput" title="Text Color" style="display: flex; align-items: center; cursor: pointer; padding: 5px;">
                    <span style="display: flex; align-items: center; justify-content: center; width: 20px; height: 20px;">
                        <i class="fa-solid fa-palette"></i>
                    </span>
                    <input type="color" id="foreColorInput" value="#333333">
                </label>
                <label for="backColorInput" title="Highlight Color" style="display: flex; align-items: center; cursor: pointer; padding: 5px;">
                    <span style="display: flex; align-items: center; justify-content: center; width: 20px; height: 20px;">
                        <i class="fa-solid fa-fill-drip"></i>
                    </span>
                    <input type="color" id="backColorInput" value="#FFFF00">
                </label>
            </span>
            <span class="button-group">
                <button id="undoBtn" title="Undo"><i class="fa-solid fa-undo"></i></button>
                <button id="redoBtn" title="Redo"><i class="fa-solid fa-redo"></i></button>
            </span>
            <span class="button-group">
                <button id="indentBtn" title="Increase Indent"><i class="fa-solid fa-indent"></i></button>
                <button id="outdentBtn" title="Decrease Indent"><i class="fa-solid fa-outdent"></i></button>
            </span>
            <span class="button-group">
                <button id="createLinkBtn" title="Insert Link"><i class="fa-solid fa-link"></i></button>
            </span>
            <span class="button-group">
                <button id="removeFormatBtn" title="Clear Formatting"><i class="fa-solid fa-eraser"></i></button>
            </span>
        </div>
        <div id="editor" contenteditable="true" data-placeholder="Start typing here..."></div>
        <div id="wordCountDisplay" style="margin-top: 10px; margin-left: 5px; font-size: 12px; color: #939393;">
            Words: 0 - Characters: 0 | Selected words: 0 - Selected characters: 0
        </div>
        <div id="customModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <p id="modal-message">Message goes here</p>
                <div id="modal-actions">
                    <button id="modal-confirm">Confirm</button>
                    <button id="modal-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>

<div id="shareConfirmModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('shareConfirmModal')">&times;</span>
    <p>
      This action will upload your content to our server so you can share it.
      No data will be sent unless you confirm. Do you want to continue?
    </p>
    <div id="modal-actions">
      <button onclick="confirmShare()">Confirm</button>
      <button id="modal-cancel" onclick="closeModal('shareConfirmModal')">Cancel</button>
    </div>
  </div>
</div>

<div id="setPasswordModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('setPasswordModal')">&times;</span>
    <p>Set a password for this shared file</p>
    <input type="password" id="passwordInput" placeholder="Password" style="width: 100%; padding: 8px; margin: 10px 0; border-radius: 4px; border: 1px solid #ccc;">
    <input type="password" id="confirmPasswordInput" placeholder="Confirm Password" style="width: 100%; padding: 8px; margin: 10px 0; border-radius: 4px; border: 1px solid #ccc;">
    <div id="modal-actions">
      <button onclick="submitPassword()">Set Password</button>
      <button id="modal-cancel" onclick="closeModal('setPasswordModal')">Cancel</button>
    </div>
  </div>
</div>

<div id="shareResultModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('shareResultModal')">&times;</span>
    <p id="shareResultMessage"></p>
    <div id="shareLinkContainer" style="margin: 15px 0; display: none;">
      <input type="text" id="shareLinkInput" readonly style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button onclick="copyShareLink()" style="flex: 1;">Copy Link</button>
        <button id="setPasswordBtn" style="flex: 1;">Set Password</button>
      </div>
    </div>
    <div id="modal-actions">
      <button onclick="closeModal('shareResultModal')">Close</button>
    </div>
  </div>
</div>

    <script src="/scripts.js"></script>
</body>
</html>